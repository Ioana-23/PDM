{"ast":null,"code":"var _jsxFileName = \"D:\\\\Laboratoare\\\\ANUL 3\\\\Semestrul 1\\\\ProgramarepentruDispozitiveMobile\\\\Examen\\\\Project\\\\src\\\\todo\\\\ItemList.tsx\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { IonButton, IonButtons, IonContent, IonHeader, IonList, IonPage, IonRadioGroup, IonSearchbar, IonSplitPane, IonTitle, IonToolbar } from '@ionic/react';\nimport Item from './Item';\nimport Product from \"./Product\";\nimport { getLogger } from '../core';\nimport { ItemContext } from './ItemProvider';\nconst log = getLogger('ItemList');\n\nconst ItemList = ({\n  history\n}) => {\n  const {\n    products,\n    items,\n    fetching,\n    fetchingError,\n    saveItem,\n    page,\n    total,\n    canReDownload,\n    reDownload,\n    upload,\n    uploadNr,\n    uploading\n  } = useContext(ItemContext);\n  const [searchProduct, setSearchProduct] = useState('');\n  const [shownProducts, setShownProducts] = useState([]);\n  const [selected, setSelected] = useState(-1);\n  const [quantity, setQuantity] = useState(0);\n  useEffect(() => {\n    if (products && searchProduct && !fetching) {\n      const filtered = products.filter(el => el.name.indexOf(searchProduct) !== -1).slice(0, 5);\n      setShownProducts(filtered);\n    }\n  }, [searchProduct, products, fetching]);\n  useEffect(() => {\n    if (selected < 0) return;\n    const quantity = prompt(\"Please enter the quantity:\", \"1\");\n    if (!quantity) return;\n    const qval = parseInt(quantity);\n\n    if (qval > 0) {\n      setQuantity(qval);\n    }\n  }, [selected]);\n  useEffect(() => {\n    log('items changed', items);\n  }, [items]);\n\n  const addItem = () => {\n    saveItem === null || saveItem === void 0 ? void 0 : saveItem({\n      quantity: quantity,\n      code: selected\n    }); //alert(\"Added \" + selected + \" qt\" + quantity);\n  };\n\n  const handleUpload = () => {\n    upload === null || upload === void 0 ? void 0 : upload(items);\n  };\n\n  log('render');\n  return /*#__PURE__*/React.createElement(IonPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(IonSplitPane, {\n    when: \"xs\",\n    contentId: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(IonContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonToolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 15\n    }\n  }, fetching && /*#__PURE__*/React.createElement(IonTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 19\n    }\n  }, \"Downloading \", page, \" / \", total / 10), /*#__PURE__*/React.createElement(IonSearchbar, {\n    debounce: 2000,\n    onIonChange: e => setSearchProduct(e.detail.value || ''),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(IonButtons, {\n    slot: \"end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  }, canReDownload && !fetching && /*#__PURE__*/React.createElement(IonButton, {\n    onClick: reDownload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 19\n    }\n  }, \"Download\"), selected >= 0 && /*#__PURE__*/React.createElement(IonButton, {\n    onClick: addItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 19\n    }\n  }, \"Add\")))), /*#__PURE__*/React.createElement(IonRadioGroup, {\n    onIonChange: ev => {\n      setSelected(ev.detail.value ? parseInt(ev.detail.value) : -1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, shownProducts.map(pr => /*#__PURE__*/React.createElement(Product, {\n    key: pr.code,\n    code: pr.code,\n    name: pr.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ion-page\",\n    id: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IonHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonToolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  }, uploading && /*#__PURE__*/React.createElement(IonTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, \"Uploading \", uploadNr, \" / \", items === null || items === void 0 ? void 0 : items.length), /*#__PURE__*/React.createElement(IonButtons, {\n    slot: \"end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, !uploading && items && /*#__PURE__*/React.createElement(IonButton, {\n    onClick: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, \"Upload\")))), /*#__PURE__*/React.createElement(IonList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, items && items.map(it => /*#__PURE__*/React.createElement(Item, {\n    key: it.code,\n    quantity: it.quantity,\n    code: it.code,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  })))))));\n};\n\nexport default ItemList;","map":{"version":3,"sources":["D:/Laboratoare/ANUL 3/Semestrul 1/ProgramarepentruDispozitiveMobile/Examen/Project/src/todo/ItemList.tsx"],"names":["React","useContext","useEffect","useState","IonButton","IonButtons","IonContent","IonHeader","IonList","IonPage","IonRadioGroup","IonSearchbar","IonSplitPane","IonTitle","IonToolbar","Item","Product","getLogger","ItemContext","log","ItemList","history","products","items","fetching","fetchingError","saveItem","page","total","canReDownload","reDownload","upload","uploadNr","uploading","searchProduct","setSearchProduct","shownProducts","setShownProducts","selected","setSelected","quantity","setQuantity","filtered","filter","el","name","indexOf","slice","prompt","qval","parseInt","addItem","code","handleUpload","e","detail","value","ev","map","pr","length","it"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport {\n  IonButton,\n  IonButtons,\n  IonContent, IonHeader,\n  IonList, IonLoading,\n  IonPage, IonRadioGroup, IonSearchbar, IonSplitPane, IonTitle, IonToolbar\n} from '@ionic/react';\nimport Item from './Item';\nimport Product from \"./Product\";\nimport { getLogger } from '../core';\nimport { ItemContext } from './ItemProvider';\nimport {ItemProps} from \"./ItemProps\";\nimport {ProductProps} from \"./ProductProps\";\nimport {queryByDisplayValue} from \"@testing-library/react\";\n\nconst log = getLogger('ItemList');\n\nconst ItemList: React.FC<RouteComponentProps> = ({ history }) => {\n  const { products, items, fetching, fetchingError, saveItem, page, total, canReDownload, reDownload, upload, uploadNr, uploading } = useContext(ItemContext);\n\n  const [searchProduct, setSearchProduct] = useState('');\n  const [shownProducts, setShownProducts] = useState<ProductProps[]>([]);\n  const [selected, setSelected] = useState(-1);\n  const [quantity, setQuantity] = useState(0);\n\n  useEffect(() => {\n    if (products && searchProduct && !fetching) {\n      const filtered = products.filter(el => el.name.indexOf(searchProduct) !== -1).slice(0, 5);\n      setShownProducts(filtered);\n    }\n  }, [searchProduct, products, fetching]);\n\n  useEffect(() => {\n    if(selected < 0) return;\n\n    const quantity = prompt(\"Please enter the quantity:\", \"1\");\n    if (!quantity) return;\n\n    const qval = parseInt(quantity);\n    if (qval > 0) {\n      setQuantity(qval);\n    }\n\n  }, [selected]);\n\n  useEffect(() => {\n    log('items changed', items);\n  }, [items])\n\n  const addItem = () => {\n    saveItem?.({quantity: quantity, code: selected});\n    //alert(\"Added \" + selected + \" qt\" + quantity);\n  }\n\n  const handleUpload = () => {\n    upload?.(items);\n  }\n\n  log('render');\n  return (\n    <IonPage>\n      <IonSplitPane when=\"xs\" contentId=\"main\">\n        <IonContent>\n            <IonHeader>\n              <IonToolbar>\n              {fetching && (\n                  <IonTitle>Downloading {page} / {total / 10}</IonTitle>\n              )}\n              <IonSearchbar debounce={2000} onIonChange={ e => setSearchProduct(e.detail.value || '')}></IonSearchbar>\n              <IonButtons slot=\"end\">\n                {(canReDownload && !fetching) &&\n                  <IonButton onClick={reDownload}>\n                    Download\n                  </IonButton>\n                }\n                {selected >= 0 && (\n                  <IonButton onClick={addItem}>\n                    Add\n                  </IonButton>\n                )}\n              </IonButtons>\n              </IonToolbar>\n            </IonHeader>\n          <IonRadioGroup onIonChange={ (ev) => { setSelected(ev.detail.value? parseInt(ev.detail.value): -1) } }>\n            {shownProducts.map(pr => (\n                <Product key={pr.code} code={pr.code} name={pr.name}/>\n            ))}\n          </IonRadioGroup>\n        </IonContent>\n\n        <div className=\"ion-page\" id=\"main\">\n          <IonContent>\n            <IonHeader>\n              <IonToolbar>\n                {uploading && (\n                    <IonTitle>Uploading {uploadNr} / {items?.length}</IonTitle>\n                )}\n                <IonButtons slot=\"end\">\n                  {(!uploading && items) && (\n                    <IonButton onClick={handleUpload}>\n                        Upload\n                    </IonButton>\n                  )}\n                </IonButtons>\n              </IonToolbar>\n            </IonHeader>\n            <IonList>\n              {items &&\n                items.map(it =>\n                <Item key={it.code} quantity={it.quantity} code={it.code}/>)\n              }\n            </IonList>\n          </IonContent>\n        </div>\n      </IonSplitPane>\n    </IonPage>\n  );\n};\n\nexport default ItemList;\n"]},"metadata":{},"sourceType":"module"}